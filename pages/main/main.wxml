<!--pages/main/main.wxml-->

<!-- <scroll-view style="width:100%;height:100%;" scroll-y="true" bindscrolltolower="lower" > -->
<view style='width:100%;height:{{trueHeight*1.5}}px;' class='container' >
  <!--搜索框开始  -->
  <view style='background:white;width:100%;height:auto;'>
    <view class='search' style='width:95%;height:{{trueHeight*0.1}}px;margin:0 2.5%;'>
      <view class='select_box' style="flex:1;width:100%;height:100%;display:flex;align-items:center;">
        <view class='select' bindtap='choose'>
          <text class='select_text' >{{selectData}}</text>
          <image class='select_img {{show&&"select_img_rotate"}}' src='/images/down.png' mode='widthFix' ></image>
        </view>
        
      </view>
      <view class='selected' style="flex:2.5;width:90%;height:100%;display:flex;align-items:center;">
        
        <image wx:if="{{flag}}" class="icon" src='/images/search.png' style='width:30rpx;height:30rpx;transform:translate(135%,10%);position:absolute;z-index:2;'></image>
        <input name="search" placeholder='搜索当地华人服务' placeholder-style='padding-left:65rpx;font-size:28rpx;' class='searchInput' value="{{inputValue}}" bindinput='inputValue' bindblur='blur' bindfocus='focus'></input>

      </view>
    </view>
  </view>
  <!--搜索框结束  -->
  <!--轮播图开始  -->
  <view style='background:white;width:100%;height:auto;'>
    <swiper style='width:95%;height:{{trueHeight*0.24}}px;margin:0 2.5%;background: white;' indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" class='swiper'>
      <block wx:for="{{imgUrls}}">
        <swiper-item>
          <image src="{{item.url}}" class="slide-image" />
        </swiper-item>
      </block>
    </swiper>
  </view>
  <!--轮播图结束  -->
  <!--栏目开始  -->
  <!--测试获取用户手机号  -->
  <!-- <button open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">获取手机号</button>  -->
  <view style='background:white;width:100%;height:auto;'>
    <view class='service' style='width:95%;height:auto;margin:0 2.5%;'>
      <block wx:for="{{serviceData}}">
        <view class='service_item' bindtap='nav' data-service_id="{{item.service_id}}">
          <image src='{{item.url}}' />
          <text style='font-size:26rpx;color:#8e8e8e;'>{{item.text}}</text>
        </view>
      </block>
    </view>
  </view>
  <!--栏目结束  -->
  <!--广告栏开始  -->
  <view style='background:white;width:100%;height:auto;'>
    <view class='ad' style='width:95%;height:{{trueHeight*0.1}}px;margin:20rpx 2.5%;'>
      <image src='/images/adImage.png' style='flex:0 0 80rpx;' mode='widthFix'></image>
      <view class='ad_text'>
        <block wx:for="{{adData}}">
          <text style='color:#303030;font-size:28rpx;'>  ·{{item.text}}</text>
        </block>
      </view>
    </view>
  </view>
  <!--广告栏结束  -->
  <!--朋友圈开始  -->
  <view class="curcle">
    <block wx:for="{{swiperData}}">
      <view data-index="{{item.index}}" bindtap="change" class='{{(item.index===swiperIndex)?"on":"off"}}'>{{item.text}}</view>
    </block>

  </view>

  <swiper current='{{swiperIndex}}' style="width:100%;height:2400rpx" bindchange='ceshi'>

    <swiper-item style="width:100%;height:auto;overflow:show;">
    
      <view id='userData1'>
        <block wx:for="{{userData1}}" wx:for-index="totalIndex">
        
          <view class='inBox' style='width:100%;height:auto;margin-bottom:20rpx;background:white;padding-left:20rpx;padding-top:40rpx;'>
            <view class='user_message'>
              <image src="{{item.avatarUrl}}"></image>
              <view class='name'>
                <view style='font-size:28rpx;color:#090909;'>{{item.name}}</view>
                <view style='color:#757575;margin-left:-6rpx;font-size:26rpx;margin-top:12rpx;'>{{item.timeStamp}}</view>
              </view>
            </view>
            <view class="content" bindtap='intoDetails' data-id="{{item.message_id}}" data-isPraise="{{item.others[2].flag}}">
              <view class='content_text' style='margin-top:20rpx;margin-bottom:10rpx;'>
                <text style='color:#7399D8;font-size:30rpx;'>#{{item.category}}#</text>{{item.text}}</view>
              <view class='content_image' style='display:flex;justify-content:flex-start;flex-wrap:wrap;' wx:if="{{item.len}}">
                <block wx:for="{{item.content}}" wx:for-item="child_item">
                  <image src='{{child_item}}' style='{{item.content.length==1?"width:300rpx;margin:5px 2px;height:300rpx;":"width:222rpx;margin:5px 2px;height:222rpx;"}}' binderror='error' data-index="{{index}}" data-totalIndex="{{totalIndex}}" wx:if="{{item.len}}"></image>
                </block>
              </view>
            </view>
            <view class="address">

              <image src="/images/loc.png" style="width:10px;margin-right:20rpx;" mode='widthFix' />
              <text style='color:#aeaeae;font-size:26rpx;'>{{item.address}}</text>
            </view>
            <view class='others' style='padding-bottom:20rpx;'>
              <!-- <block wx:for="{{item.others}}" wx:for-item="others_item"> -->
              <view class='others1'>
                <image src="{{item.others[0].key}}" style="width:36rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[0].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[0].value}}</text>
              </view>
              <view class='others1' data-sourceId="{{item.message_id}}" catchtap='intoComments'>
                <image src="{{item.others[1].key}}" style="width:34rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[1].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[1].value}}</text>
              </view>
              <view class='others1'>
                <image src="{{item.others[2].flag?'/images/succ.png':'/images/dianzan.png'}}" class="{{item.others[2].flag}}" style="width:30rpx;margin-right:20rpx;" data-sourceId="{{item.message_id}}" data-index="{{totalIndex}}" mode='widthFix' catchtap="{{item.others[2].flag?'dianzanF':'dianzanT'}}"  />
                <!-- <image src="/images/dianzan.png" style="width:30rpx;margin-right:20rpx;" data-sourceId="{{item.message_id}}" data-index="{{totalIndex}}" mode='widthFix' catchtap='dianzanT' wx:else /> -->
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[2].value}}</text>
              </view>
              <view class='others1'>
                <image src="{{item.others[3].key}}" style="width:30rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[3].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[3].value}}</text>
              </view>
              <!-- </block> -->

            </view>
          </view>
        </block>
</view>
      
    </swiper-item>

    <swiper-item style="width:100%;height:100%; ">
      <!-- <image src="{{item}}" class="slide-image" width="355" height="150"/>
       -->
      <view id='userData2'>
       <block wx:for="{{userData2}}" wx:for-index="totalIndex">
          <view class='inBox' style='width:100%;height:auto;margin-bottom:20rpx;background:white;padding-left:20rpx;padding-top:40rpx;'>
            <view class='user_message'>
              <image src="{{item.avatarUrl}}"></image>
              <view class='name'>
                <view style='font-size:28rpx;color:#090909;'>{{item.name}}</view>
                <view style='color:#757575;margin-left:-6rpx;font-size:26rpx;margin-top:12rpx;'>{{item.timeStamp}}</view>
              </view>
            </view>
            <view class="content" bindtap='intoDetails' data-id="{{item.message_id}}" data-isPraise="{{item.others[2].flag}}">
              <view class='content_text' style='margin-top:20rpx;margin-bottom:10rpx;'>
                <text style='color:#7399D8;font-size:30rpx;'>#{{item.category}}#</text>{{item.text}}</view>
              <view class='content_image' style='display:flex;justify-content:flex-start;flex-wrap:wrap;' wx:if="{{item.len}}">
                <block wx:for="{{item.content}}" wx:for-item="child_item">
                  <image src='{{child_item}}' style='{{item.content.length==1?"width:300rpx;margin:5px 2px;height:300rpx;":"width:222rpx;margin:5px 2px;height:222rpx;"}}' binderror='error' data-index="{{index}}" data-totalIndex="{{totalIndex}}" wx:if="{{item.len}}"></image>
                </block>
              </view>
            </view>
            <view class="address">

              <image src="/images/loc.png" style="width:10px;margin-right:20rpx;" mode='widthFix' />
              <text style='color:#aeaeae;font-size:26rpx;'>{{item.address}}</text>
            </view>
            <view class='others' style='padding-bottom:20rpx;'>
              <!-- <block wx:for="{{item.others}}" wx:for-item="others_item"> -->
              <view class='others1'>
                <image src="{{item.others[0].key}}" style="width:36rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[0].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[0].value}}</text>
              </view>
              <view class='others1' data-sourceId="{{item.message_id}}" catchtap='intoComments'>
                <image src="{{item.others[1].key}}" style="width:34rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[1].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[1].value}}</text>
              </view>
              <view class='others1'>
                <image src="{{item.others[2].flag?'/images/succ.png':'/images/dianzan.png'}}" class="{{item.others[2].flag}}" style="width:30rpx;margin-right:20rpx;" data-sourceId="{{item.message_id}}" data-index="{{totalIndex}}" mode='widthFix' catchtap="{{item.others[2].flag?'dianzanF':'dianzanT'}}"  />
                <!-- <image src="/images/dianzan.png" style="width:30rpx;margin-right:20rpx;" data-sourceId="{{item.message_id}}" data-index="{{totalIndex}}" mode='widthFix' catchtap='dianzanT' wx:else /> -->
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[2].value}}</text>
              </view>
              <view class='others1'>
                <image src="{{item.others[3].key}}" style="width:30rpx;margin-right:20rpx;" mode='widthFix' wx:if="{{item.others[3].key}}" />
                <text style='color:#aeaeae;font-size:26rpx;'>{{item.others[3].value}}</text>
              </view>
              <!-- </block> -->

            </view>
          </view>
        </block>
</view>
      

    </swiper-item>
  </swiper>

  <!--朋友圈结束  -->
  <!--发布按钮开始  -->
  <!-- <view class='send'><image src='/images/send1.png' style='width:74rpx;height:74rpx;'></image></view> -->
  <!--发布按钮结束  -->
</view>
